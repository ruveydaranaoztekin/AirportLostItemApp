<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AirportLostItemApp.MainPage"
             BackgroundColor="{StaticResource Secondary}">

    <Grid RowDefinitions="Auto, *, Auto" Padding="20">

        <VerticalStackLayout Grid.Row="0" Spacing="5" Margin="0,0,0,15">
            <Label Text="✈️ HAVAALANI" FontSize="28" FontAttributes="Bold" TextColor="{StaticResource PrimaryDark}" HorizontalOptions="Center"/>
            <Label Text="Kayıp Eşya Yönetim Sistemi" FontSize="14" TextColor="{StaticResource Gray600}" HorizontalOptions="Center"/>
        </VerticalStackLayout>

        <CollectionView Grid.Row="1" x:Name="ItemsList" Margin="0,0,0,10">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,5" Padding="10" CornerRadius="10" BackgroundColor="White" BorderColor="Transparent">
                        <Grid RowDefinitions="Auto, Auto">
                            
                            <Image Grid.Row="0" 
                                   Source="{Binding PhotoPath}" 
                                   Aspect="AspectFill" 
                                   HeightRequest="150" 
                                   Margin="0,0,0,10"
                                   IsVisible="{Binding PhotoPath, Converter={StaticResource x:StringNullOrEmptyConverter}, ConverterParameter=True}"/> <Grid Grid.Row="1" ColumnDefinitions="50, *, Auto">
                                <Label Grid.Column="0" Text="{Binding Icon}" FontSize="30" VerticalOptions="Center" HorizontalOptions="Center"/>
                                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                    <Label Text="{Binding Name}" FontSize="16" FontAttributes="Bold" TextColor="Black"/>
                                    <Label Text="{Binding Location}" FontSize="12" TextColor="Gray"/>
                                    <Label Text="{Binding Priority}" FontSize="10" TextColor="Red" FontAttributes="Bold"/>
                                </VerticalStackLayout>
                                <HorizontalStackLayout Grid.Column="2" Spacing="5">
                                    <Button Text="✅" Clicked="OnFoundClicked" BackgroundColor="#E8F5E9" TextColor="Green" HeightRequest="40" WidthRequest="40" CornerRadius="20"/>
                                    <Button Text="🗑️" Clicked="OnDeleteClicked" BackgroundColor="#FFEBEE" TextColor="Red" HeightRequest="40" WidthRequest="40" CornerRadius="20"/>
                                </HorizontalStackLayout>
                            </Grid>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Frame Grid.Row="2" CornerRadius="15" BackgroundColor="White" Padding="15">
            <ScrollView> <VerticalStackLayout Spacing="10">
                    <Entry x:Name="NameEntry" Placeholder="Eşya Adı (Örn: Kırmızı Bavul)" />
                    <Entry x:Name="LocEntry" Placeholder="Bulunan Yer (Örn: Kapı A5)" />
                    
                    <Grid ColumnDefinitions="*, *">
                        <Picker x:Name="PriorityPicker" Grid.Column="0" Title="Önem Derecesi">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}"><x:String>Normal</x:String><x:String>ACİL</x:String></x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                        <DatePicker x:Name="DateEntry" Grid.Column="1"/>
                    </Grid>

                    <Button Text="📸 FOTOĞRAF ÇEK" Clicked="OnTakePhotoClicked" BackgroundColor="#4CAF50"/>
                    <Image x:Name="PreviewImage" HeightRequest="100" Aspect="AspectFit" IsVisible="False" BackgroundColor="#F0F0F0"/>

                    <Button Text="💾 SİSTEME KAYDET" Clicked="OnSaveClicked" BackgroundColor="{StaticResource Primary}" FontAttributes="Bold"/>
                    <Button Text="🧹 LİSTEYİ TEMİZLE" Clicked="OnClearAllClicked" BackgroundColor="Transparent" TextColor="Red" FontSize="12"/>
                </VerticalStackLayout>
            </ScrollView>
        </Frame>

    </Grid>
</ContentPage>